require=function c(r,s,h){function d(i,e){if(!s[i]){if(!r[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[i]={exports:{}};r[i][0].call(o.exports,function(e){var t=r[i][1][e];return d(t||e)},o,o.exports,c,r,s,h)}return s[i].exports}for(var l="function"==typeof require&&require,e=0;e<h.length;e++)d(h[e]);return d}({Helloworld:[function(e,t,i){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Helloworld"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./item"),o=cc._decorator,c=o.ccclass,r=o.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.heigth=0,e.allItem=[],e.mineConut=10,e.gameover=null,e}return __extends(e,t),e.prototype.start=function(){for(var s=this,h=0,e=0;e<this.width;e++)for(var t=0;t<this.heigth;t++)cc.loader.loadRes("item",function(e,t){var i=Math.floor(h/s.width),n=h%s.width,o=cc.instantiate(t),c=o.getComponent("item");s.allItem.push(c),o.parent=s.node,o.setPosition(cc.p(16*n,16*-i));var r=Math.round(Math.random());console.log(r),0<s.mineConut&&1==r&&(console.log(c),c.ismine=!0,s.mineConut--),c.index=h,c.indexX=Math.floor(h/s.width),c.indexY=h%s.width,c.hello=s,h++})},e.prototype.onclick=function(e){console.log(this.allItem),e.ismine?this.gameover.active=!0:this.check(e)},e.prototype.check=function(e){if(!e.ismine&&!e.isvisited){console.log(e);var t=this.checkMineCount(e);if(e.setCount(this.checkMineCount(e)),console.log("mine count ="+t),!(0<t)){var i=this.getIndex(e.indexX-1,e.indexY-1),n=this.getIndex(e.indexX-1,e.indexY),o=this.getIndex(e.indexX-1,e.indexY+1),c=this.getIndex(e.indexX,e.indexY-1),r=this.getIndex(e.indexX,e.indexY+1),s=this.getIndex(e.indexX+1,e.indexY-1),h=this.getIndex(e.indexX+1,e.indexY),d=this.getIndex(e.indexX+1,e.indexY+1);this.checkOneItemBy(i),this.checkOneItemBy(n),this.checkOneItemBy(o),this.checkOneItemBy(c),this.checkOneItemBy(r),this.checkOneItemBy(s),this.checkOneItemBy(h),this.checkOneItemBy(d)}}},e.prototype.checkMineCount=function(e){e.isvisited=!0;var t=0,i=this.getIndex(e.indexX-1,e.indexY-1),n=this.getIndex(e.indexX-1,e.indexY),o=this.getIndex(e.indexX-1,e.indexY+1),c=this.getIndex(e.indexX,e.indexY-1),r=this.getIndex(e.indexX,e.indexY+1),s=this.getIndex(e.indexX+1,e.indexY-1),h=this.getIndex(e.indexX+1,e.indexY),d=this.getIndex(e.indexX+1,e.indexY+1);return t+=this.checkOneItem(i),t+=this.checkOneItem(n),t+=this.checkOneItem(o),t+=this.checkOneItem(c),t+=this.checkOneItem(r),t+=this.checkOneItem(s),t+=this.checkOneItem(h),t+=this.checkOneItem(d)},e.prototype.checkOneItem=function(e){return 0<=e&&e<this.width*this.heigth&&this.allItem[e].ismine?1:0},e.prototype.checkOneItemBy=function(e){0<=e&&e<this.width*this.heigth&&this.check(this.allItem[e])},e.prototype.getIndex=function(e,t){return e<0||e>=this.heigth||t<0||t>=this.width?-1:e*this.width+t},__decorate([r(cc.Integer)],e.prototype,"width",void 0),__decorate([r(cc.Integer)],e.prototype,"heigth",void 0),__decorate([r([n.default])],e.prototype,"allItem",void 0),__decorate([r(cc.Integer)],e.prototype,"mineConut",void 0),__decorate([r(cc.Node)],e.prototype,"gameover",void 0),e=__decorate([c],e)}(cc.Component);i.default=s,cc._RF.pop()},{"./item":"item"}],item:[function(e,t,i){"use strict";cc._RF.push(t,"85d52BSmlZJcJUQXCFgzVlz","item"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Helloworld"),o=cc._decorator,c=o.ccclass,r=o.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sf=[],e.sprite=null,e.ismine=!1,e.indexX=0,e.indexY=0,e.index=0,e.hello=null,e.isvisited=!1,e.thisItem=null,e}return __extends(e,t),(i=e).prototype.onLoad=function(){this.sprite.spriteFrame=this.sf[0]},e.prototype.onClick=function(){this.sprite.spriteFrame=this.sf[1],this.hello.onclick(this.thisItem)},e.prototype.setCount=function(e){this.sprite.spriteFrame=this.sf[e+1]},e.prototype.showMine=function(){console.log(this.ismine),this.ismine&&(console.log(this.sf[8]),this.sprite.spriteFrame=this.sf[8])},__decorate([r([cc.SpriteFrame])],e.prototype,"sf",void 0),__decorate([r(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([r(n.default)],e.prototype,"hello",void 0),__decorate([r(i)],e.prototype,"thisItem",void 0),e=i=__decorate([c],e);var i}(cc.Component);i.default=s,cc._RF.pop()},{"./Helloworld":"Helloworld"}]},{},["Helloworld","item"]);